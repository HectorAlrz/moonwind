# Moonwind ğŸŒ™
## Alpha Version -NO COMPLETA-
Bienvenido a Moonwind, una aplicaciÃ³n diseÃ±ada para organizar proyectos. Este proyecto utiliza una base de datos SQLite3 para almacenar la informaciÃ³n y Flask para la visualizaciÃ³n de ciertos datos.

## âœ¨ CaracterÃ­sticas Principales

*   GestiÃ³n de usuarios.
*   CreaciÃ³n y organizaciÃ³n de "historias" (proyectos o tableros).
*   Listas y tarjetas para desglosar tareas o ideas.
*   Comentarios en tarjetas para colaboraciÃ³n.
*   AsignaciÃ³n de usuarios a tarjetas.

## ğŸ“‹ Requisitos Previos

Antes de empezar, asegÃºrate de tener instalado:

*   Python (se recomienda versiÃ³n 3.8 o superior)
*   `pip` (el gestor de paquetes de Python)
*   `venv` (mÃ³dulo para crear entornos virtuales, usualmente incluido con Python)
*   Git (para clonar el repositorio)

## ğŸš€ Puesta en Marcha (Getting Started)

Sigue estos pasos para configurar y ejecutar el proyecto en tu mÃ¡quina local:

1.  **Clona el Repositorio:**
    ```bash
    git clone https://github.com/HectorAlrz/moonwind.git
    cd moonwind
    ```

2.  **Crea y Activa un Entorno Virtual:**
    Es altamente recomendable trabajar dentro de un entorno virtual.
    ```bash
    python3 -m venv venv
    ```
    ActÃ­valo:
    *   En macOS y Linux:
        ```bash
        source venv/bin/activate
        ```
    *   En Windows (Git Bash o CMD/PowerShell):
        ```bash
        .\venv\Scripts\activate
        ```
    VerÃ¡s `(venv)` al inicio de la lÃ­nea de tu terminal si se activÃ³ correctamente.

3.  **Instala las Dependencias:**
    Si tienes un archivo `requirements.txt`, ejecuta:
    ```bash
    pip install -r requirements.txt
    ```

4.  **Configura la Base de Datos:**
    Los siguientes scripts crearÃ¡n la estructura de la base de datos (`moonwind.db` dentro de la carpeta `data/`) y la poblarÃ¡n con datos iniciales. EjecÃºtalos desde la raÃ­z del proyecto (`moonwind/`):
    ```bash
    python3 src/database_setup.py
    python3 src/seed_data.py
    ```
    DespuÃ©s de ejecutar estos comandos, deberÃ­as tener un archivo `data/moonwind.db` con las tablas y los datos.

## ğŸƒ Ejecutando la AplicaciÃ³n


Para iniciar el servidor Flask:
```bash


ğŸ“ Estructura del Proyecto
moonwind/
â”œâ”€â”€ data/                     # Almacena el archivo de base de datos
â”‚   â””â”€â”€ moonwind.db
â”œâ”€â”€ src/                      # CÃ³digo fuente principal de la aplicaciÃ³n
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ database_setup.py     # Script para crear el esquema de la BD
â”‚   â”œâ”€â”€ seed_data.py          # Script para poblar la BD con datos iniciales
â”‚   â”œâ”€â”€ utils/                # MÃ³dulos de utilidad (ej: db.py para conexiÃ³n)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ db.py
â”‚   â”œâ”€â”€ queries/              # MÃ³dulos con funciones de consulta SQL
â”‚   â”‚   â””â”€â”€ user_queries.py
â”‚   â”‚   â””â”€â”€ codigo_facilito_queries.py
â”œâ”€â”€ venv/                     # Entorno virtual de Python (ignorado por Git)
â”œâ”€â”€ .gitignore                # Archivos y carpetas ignorados por Git
â”œâ”€â”€ requirements.txt          # Dependencias del proyecto (generar con `pip freeze > requirements.txt`)
â””â”€â”€ README.md                 # Este archivo

# Esquema de la base de datos

ğŸ—ï¸ Esquema de la Base de Datos

ğŸ“„ Tabla users
Contiene la informaciÃ³n de los usuarios registrados.

| Columna           | Tipo      | DescripciÃ³n                  |
| ----------------- | --------- | ---------------------------- |
| `user_id`         | INTEGER   | Primary Key, autoincremental |
| `username`        | TEXT      | Nombre de usuario Ãºnico      |
| `email`           | TEXT      | Correo electrÃ³nico Ãºnico     |
| `password`        | TEXT      | ContraseÃ±a encriptada        |
| `full_name`       | TEXT      | Nombre completo del usuario  |
| `profile_picture` | TEXT      | URL o ruta del avatar        |
| `settings`        | TEXT/JSON | ConfiguraciÃ³n personalizada  |

ğŸ“„ Tabla story
Representa una historia principal que agrupa listas y tarjetas (como en Trello o Notion).

| Columna      | Tipo     | DescripciÃ³n                           |
| ------------ | -------- | ------------------------------------- |
| `story_id`   | INTEGER  | Primary Key                           |
| `title`      | TEXT     | TÃ­tulo de la historia                 |
| `created_by` | INTEGER  | Foreign Key â†’ `users.user_id`         |
| `created_at` | DATETIME | Fecha de creaciÃ³n                     |
| `is_starred` | INTEGER  | 0 o 1 (booleano) para marcar favorita |


ğŸ“„ Tabla story_members
Lista de miembros que tienen acceso a una historia.

| Columna     | Tipo     | DescripciÃ³n                    |
| ----------- | -------- | ------------------------------ |
| `user_id`   | INTEGER  | Foreign Key â†’ `users.user_id`  |
| `story_id`  | INTEGER  | Foreign Key â†’ `story.story_id` |
| `role`      | TEXT     | `'admin'` o `'member'`         |
| `joined_at` | DATETIME | Fecha de uniÃ³n                 |


ğŸ” Clave primaria compuesta: (user_id, story_id)

ğŸ“„ Tabla lists
Agrupa tarjetas dentro de una historia.

| Columna    | Tipo    | DescripciÃ³n                    |
| ---------- | ------- | ------------------------------ |
| `list_id`  | INTEGER | Primary Key                    |
| `title`    | TEXT    | TÃ­tulo de la lista             |
| `story_id` | INTEGER | Foreign Key â†’ `story.story_id` |
| `position` | INTEGER | Orden relativo en la historia  |


ğŸ“„ Tabla cards
Tarjetas dentro de una lista (tareas o ideas).

| Columna       | Tipo     | DescripciÃ³n                   |
| ------------- | -------- | ----------------------------- |
| `card_id`     | INTEGER  | Primary Key                   |
| `title`       | TEXT     | TÃ­tulo de la tarjeta          |
| `description` | TEXT     | DescripciÃ³n larga             |
| `list_id`     | INTEGER  | Foreign Key â†’ `lists.list_id` |
| `position`    | INTEGER  | PosiciÃ³n en la lista          |
| `due_date`    | DATETIME | Fecha lÃ­mite                  |


ğŸ“„ Tabla comments
Comentarios que los usuarios hacen en una tarjeta.

| Columna      | Tipo     | DescripciÃ³n                   |
| ------------ | -------- | ----------------------------- |
| `comment_id` | INTEGER  | Primary Key                   |
| `card_id`    | INTEGER  | Foreign Key â†’ `cards.card_id` |
| `user_id`    | INTEGER  | Foreign Key â†’ `users.user_id` |
| `content`    | TEXT     | Texto del comentario          |
| `created_at` | DATETIME | Fecha y hora del comentario   |


ğŸ“„ Tabla card_assigned_users
Relaciona usuarios con tarjetas asignadas (muchos a muchos).

| Columna   | Tipo    | DescripciÃ³n                   |
| --------- | ------- | ----------------------------- |
| `card_id` | INTEGER | Foreign Key â†’ `cards.card_id` |
| `user_id` | INTEGER | Foreign Key â†’ `users.user_id` |

ğŸ” Clave primaria compuesta: (card_id, user_id)
```
 
```mermaid
erDiagram
    users ||--o{ story : "creates"
    users }o--|| story_members : "joins"
    users ||--o{ comments : "writes"
    users }o--|| card_assigned_users : "assigned"
    users ||--o{ cards : "creates"

    story ||--o{ lists : "has"
    story ||--o{ story_members : "includes"

    lists ||--o{ cards : "has"

    cards ||--o{ comments : "has"
    cards ||--o{ card_assigned_users : "has"
    ...
```

ğŸ“˜ Notas TÃ©cnicas
Todas las claves forÃ¡neas respetan PRAGMA foreign_keys = ON en SQLite.

is_starred actÃºa como un booleano: 0 (no destacada), 1 (destacada).

Las tablas story_members y card_assigned_users usan claves primarias compuestas para evitar duplicados.


## Queries
En la carpeta `queries/codigo_facilito_queries.py` se encuentran las consultas SQL solicitadas para CÃ³digo Facilito.
Estas queries permiten extraer informaciÃ³n especÃ­fica de la base de datos segÃºn los requerimientos del curso o proyecto
para correr estas queries hay que irnos a la parte de abajo donde tenemos `if __name__ == '__main__':`
y para probar cada querie hay que quitar el comentario dependiendo la que queremos probar y en la terminal corremos el comando:

    ```bash
    python3 src/database_setup.py
    python3 src/seed_data.py
    ```
